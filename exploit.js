let rab = new ArrayBuffer(1024, { maxByteLength: 2048 });
let ta = new Uint8Array(rab);
ta[0] = 42;

Object.defineProperty(rab, 'byteLength', {
  get: function () {
    rab.resize(0); // Força o buffer a ser reduzido a 0
    return 1024;
  }
});

try {
  ta.copyWithin({
    valueOf: () => {
      rab.resize(0); // Side effect
      return 1;
    }
  }, 2);
  console.log("Não houve crash.");
} catch (e) {
  console.log("Exception capturada:", e);
}
