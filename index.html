<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Exploit Overflow - Teste com Array Normal</title>
</head>
<body>
    <h1>Teste com Array JS Normal</h1>
    <p id="resultado">Executando teste...</p>

    <script>
        let controlFlag = false;
        let victim = { marker: "seguro" };

        function triggerOverflow() {
            let arr = [1, 2, 3];
            arr.length = 1000000;  // Expande o array
            for (let i = 0; i < 10; i++) arr.push(i);

            // Tentativa de sobrescrever objeto vizinho
            arr[100] = 1234;
            arr[101] = 5678;

            // Tentar modificar o objeto externo indiretamente (simulação)
            if (victim.marker !== "seguro") {
                controlFlag = true;
            }
        }

        triggerOverflow();

        if (controlFlag) {
            document.title = "Exploração bem-sucedida!";
            document.getElementById("resultado").innerText = "Exploração bem-sucedida! Código executado.";
        } else {
            document.getElementById("resultado").innerText = "Exploração falhou.";
        }
    </script>
</body>
</html>
