<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>SVG Translate Fuzzer</title>
  <style>
    svg { border: 1px solid red; width: 100%; height: 100vh; }
  </style>
</head>
<body>
  <h2>SVG Translate String Fuzzer</h2>
  <svg id="svg" viewBox="-1000 -1000 2000 2000">
    <defs>
      <rect id="target" width="40" height="40" fill="red"/>
    </defs>
  </svg>

  <script>
    const svg = document.getElementById("svg");
    const badTransforms = [
      "translate(100 100",         // parêntese aberto
      "translate(,)",              // só vírgulas
      "translate(foo)",           // texto não numérico
      "translate(1e10000,1e10000)", // valores fora da faixa
      "translate(0 0) rotate(abc)", // comando extra inválido
      "translate(0 0) scale())",    // parênteses demais
      "translate()",                // nenhum argumento
      "translate(-999999999999)",  // valores extremos
      "translate(0 0 0 0 0 0)",     // muitos argumentos
      "translate(0px, 0px)",        // unidades não esperadas
    ];

    let counter = 0;
    function fuzz() {
      const use = document.createElementNS("http://www.w3.org/2000/svg", "use");
      use.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", "#target");

      const bad = badTransforms[counter % badTransforms.length];
      use.setAttribute("transform", bad);
      svg.appendChild(use);

      counter++;
      requestAnimationFrame(fuzz);
    }

    fuzz();
  </script>
</body>
</html>
